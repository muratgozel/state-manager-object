define(["basekits","event-emitter-object"],(function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),o=n(e),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t){var e={exports:{}};return t(e,e.exports),e.exports}var f=function(t){return t&&t.Math==Math&&t},c=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof i&&i)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},l=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,v={f:p&&!s.call({1:2},1)?function(t){var e=p(this,t);return!!e&&e.enumerable}:s},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,g="".split,d=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return b.call(t).slice(8,-1)}(t)?g.call(t,""):Object(t)}:Object,h=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},j=function(t){return d(h(t))},m=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t,e){if(!m(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!m(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},w={}.hasOwnProperty,S=function(t,e){return w.call(t,e)},E=c.document,P=m(E)&&m(E.createElement),T=!l&&!a((function(){return 7!=Object.defineProperty((t="div",P?E.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),k=Object.getOwnPropertyDescriptor,M={f:l?k:function(t,e){if(t=j(t),e=O(e,!0),T)try{return k(t,e)}catch(t){}if(S(t,e))return y(!v.f.call(t,e),t[e])}},x=function(t){if(!m(t))throw TypeError(String(t)+" is not an object");return t},I=Object.defineProperty,_={f:l?I:function(t,e,n){if(x(t),e=O(e,!0),x(n),T)try{return I(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},F=l?function(t,e,n){return _.f(t,e,y(1,n))}:function(t,e,n){return t[e]=n,t},L=function(t,e){try{F(c,t,e)}catch(n){c[t]=e}return e},N="__core-js_shared__",q=c[N]||L(N,{}),z=Function.toString;"function"!=typeof q.inspectSource&&(q.inspectSource=function(t){return z.call(t)});var C,D,A,G,W=q.inspectSource,K=c.WeakMap,R="function"==typeof K&&/native code/.test(W(K)),V=u((function(t){(t.exports=function(t,e){return q[t]||(q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Y=0,B=Math.random(),H=V("keys"),J={},Q=c.WeakMap;if(R){var U=q.state||(q.state=new Q),X=U.get,Z=U.has,$=U.set;C=function(t,e){return e.facade=t,$.call(U,t,e),e},D=function(t){return X.call(U,t)||{}},A=function(t){return Z.call(U,t)}}else{var tt=H[G="state"]||(H[G]=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+B).toString(36)}(G));J[tt]=!0,C=function(t,e){return e.facade=t,F(t,tt,e),e},D=function(t){return S(t,tt)?t[tt]:{}},A=function(t){return S(t,tt)}}var et={set:C,get:D,has:A,enforce:function(t){return A(t)?D(t):C(t,{})},getterFor:function(t){return function(e){var n;if(!m(e)||(n=D(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=u((function(t){var e=et.get,n=et.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var u,f=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||S(o,"name")||F(o,"name",e),(u=n(o)).source||(u.source=r.join("string"==typeof e?e:""))),t!==c?(f?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=o:F(t,e,o)):a?t[e]=o:L(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||W(this)}))})),rt=c,ot=function(t){return"function"==typeof t?t:void 0},it=Math.ceil,ut=Math.floor,ft=function(t){return isNaN(t=+t)?0:(t>0?ut:it)(t)},ct=Math.min,at=Math.max,lt=Math.min,st=function(t){return function(e,n,r){var o,i,u=j(e),f=(o=u.length)>0?ct(ft(o),9007199254740991):0,c=function(t,e){var n=ft(t);return n<0?at(n+e,0):lt(n,e)}(r,f);if(t&&n!=n){for(;f>c;)if((i=u[c++])!=i)return!0}else for(;f>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}},pt={includes:st(!0),indexOf:st(!1)}.indexOf,vt=function(t,e){var n,r=j(t),o=0,i=[];for(n in r)!S(J,n)&&S(r,n)&&i.push(n);for(;e.length>o;)S(r,n=e[o++])&&(~pt(i,n)||i.push(n));return i},yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bt=yt.concat("length","prototype"),gt={f:Object.getOwnPropertyNames||function(t){return vt(t,bt)}},dt={f:Object.getOwnPropertySymbols},ht=function(t,e){return arguments.length<2?ot(rt[t])||ot(c[t]):rt[t]&&rt[t][e]||c[t]&&c[t][e]}("Reflect","ownKeys")||function(t){var e=gt.f(x(t)),n=dt.f;return n?e.concat(n(t)):e},jt=function(t,e){for(var n=ht(e),r=_.f,o=M.f,i=0;i<n.length;i++){var u=n[i];S(t,u)||r(t,u,o(e,u))}},mt=/#|\.prototype\./,Ot=function(t,e){var n=St[wt(t)];return n==Pt||n!=Et&&("function"==typeof e?a(e):!!e)},wt=Ot.normalize=function(t){return String(t).replace(mt,".").toLowerCase()},St=Ot.data={},Et=Ot.NATIVE="N",Pt=Ot.POLYFILL="P",Tt=Ot,kt=M.f,Mt=Object.keys||function(t){return vt(t,yt)},xt=function(t){return Object(h(t))},It=Object.assign,_t=Object.defineProperty,Ft=!It||a((function(){if(l&&1!==It({b:1},It(_t({},"a",{enumerable:!0,get:function(){_t(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=It({},t)[n]||Mt(It({},e)).join("")!=r}))?function(t,e){for(var n=xt(t),r=arguments.length,o=1,i=dt.f,u=v.f;r>o;)for(var f,c=d(arguments[o++]),a=i?Mt(c).concat(i(c)):Mt(c),s=a.length,p=0;s>p;)f=a[p++],l&&!u.call(c,f)||(n[f]=c[f]);return n}:It;!function(t,e){var n,r,o,i,u,f=t.target,a=t.global,l=t.stat;if(n=a?c:l?c[f]||L(f,{}):(c[f]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(u=kt(n,r))&&u.value:n[r],!Tt(a?r:f+(l?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;jt(i,o)}(t.sham||o&&o.sham)&&F(i,"sham",!0),nt(n,r,i,t)}}({target:"Object",stat:!0,forced:Object.assign!==Ft},{assign:Ft});var Lt=r.default.typekit,Nt=r.default.objectkit,qt=r.default.validationkit;return{create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!Lt.isObject(t))throw new Error("Invalid initial state.");var e=o.default.create(),n={state:t,prevState:null};function r(t){if(!Lt.isObject(t))throw new Error("Invalid payload.");var r=u(),o=Object.assign({},r,t);qt.isEqual(r,o)||(n.state=o,n.prevState=r,e.emit("update",[n.state,n.prevState]))}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r="string"==typeof t?t:void 0,o=void 0===r?t:n;if("function"!=typeof o)throw new Error("Subscriber function should be a type of function.");e.on("update",(function(t,e){var n=r?Nt.getProp(t,r):t,i=r?Nt.getProp(e,r):e;qt.isEqual(n,i)||o(n,i)}))}function u(){return n.state}function f(){return n.prevState}return{getState:u,getPrevState:f,updateState:r,subscribe:i}}}}));
