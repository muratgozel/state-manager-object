!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("basekits"),require("event-emitter-object")):"function"==typeof define&&define.amd?define(["basekits","event-emitter-object"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).StateManagerObject=e(t.Basekits,t.EventEmitterObject)}(this,(function(t,e){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=i(t),r=i(e),o=n.default.typekit,a=n.default.objectkit,u=n.default.validationkit;return{create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!o.isObject(t))throw new Error("Invalid initial state.");var e=r.default.create(),i={state:t,prevState:null};function n(t){if(!o.isObject(t))throw new Error("Invalid payload.");var n=d(),r=Object.assign({},n,t);u.isEqual(n,r)||(i.state=r,i.prevState=n,e.emit("update",[i.state,i.prevState]))}function f(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="string"==typeof t?t:void 0,r=void 0===n?t:i;if("function"!=typeof r)throw new Error("Subscriber function should be a type of function.");e.on("update",(function(t,e){var i=n?a.getProp(t,n):t,o=n?a.getProp(e,n):e;u.isEqual(i,o)||r(i,o)}))}function d(){return i.state}function s(){return i.prevState}return{getState:d,getPrevState:s,updateState:n,subscribe:f}}}}));
