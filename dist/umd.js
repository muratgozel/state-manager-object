(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.StateManagerObject=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){function c(){this.regexes={}}c.prototype.addKit=function(h,a=null,b=null){const c=this;let d=null,i=null,j=null;if("string"==typeof h)d=h,i=a,j=b;else if("[object Object]"===Object.prototype.toString.call(h))d=h.name,i=h.items,j=h.opts;else return;if(!("string"!=typeof d||d in c)&&"[object Object]"!==!Object.prototype.toString.call(i)){const e=Object.keys(i);if(!(1>e.length)){const f=e.filter(function(b){return"function"==typeof i[b]&&"string"==typeof b&&!(b in c)});if(f&&!(1>f.length)){c[d]={name:d,items:[],addItem:function(e,a){if(!("string"!=typeof e||e in c))return"function"==typeof a?(c[e]=a.bind(c),-1===c[d].items.indexOf(e)&&c[d].items.push(e),!0):void 0},updateItem:function(e,a){"string"!=typeof e||"function"!=typeof a||(c[e]=a.bind(c),-1===c[d].items.indexOf(e)&&c[d].items.push(e))},removeItem:function(b){if(!(!b in c))return delete c[b],c[d].items.splice(c[d].items.indexOf(b),1),!0}};for(let b=0;b<f.length;b++)c[d].addItem(f[b],i[f[b]]);return"[object Object]"===Object.prototype.toString.call(j)&&"[object Object]"===Object.prototype.toString.call(j.regexes)&&Object.keys(j.regexes).map(function(d){const a=j.regexes[d];a instanceof RegExp&&(c.regexes[d]=j.regexes[d])}),!0}}}},c.prototype.updateKit=function(e,a){if(!(!e in this)){const b=Object.keys(a);for(let c=0;c<b.length;c++)this[e].updateItem(b[c],a[b[c]]);return!0}},b.exports=new c},{}],2:[function(a,b){b.exports={name:"error",items:{objectifyError:function(a){const b=JSON.stringify(a,Object.getOwnPropertyNames(a)),c=JSON.parse(b);return c.stack=c.stack.split(/[\n]/g),c},stringifyError:function(a){return JSON.stringify(this.objectifyError(a))}}}},{}],3:[function(a,b){b.exports={name:"type",items:{isString:function(a){return"string"==typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return Array.isArray(a)},isPromise:function(a){return!!(a&&"function"==typeof a.then)},isError:function(a){return a instanceof Error},isDate:function(a){return a instanceof Date},isFunction:function(a){return"function"==typeof a},isNull:function(a){return null===a},isUndefined:function(a){return"undefined"==typeof a},isNumber:function(a){return"number"==typeof a&&!0===Number.isFinite(a)},isInteger:function(a){return Number.isInteger(a)},isNan:function(a){return"number"==typeof a&&a!=+a},isRegExp:function(a){return a instanceof RegExp},isBoolean:function(a){return!0===a||!1===a},isBigInt:function(a){return"bigint"==typeof a},isSymbol:function(a){return"symbol"==typeof a},isDOMElement:function(a){return!!(a&&(a.nodeName||a.prop&&a.attr&&a.find))},getType:function(a){return this.isObject(a)?"object":this.isArray(a)?"array":this.isPromise(a)?"promise":this.isError(a)?"error":this.isDate(a)?"date":this.isNull(a)?"null":this.isUndefined(a)?"undefined":this.isFunction(a)?"function":this.isNumber(a)?"number":this.isNan(a)?"nan":this.isRegExp(a)?"regexp":this.isString(a)?"string":this.isBoolean(a)?"boolean":this.isBigInt(a)?"bigint":this.isSymbol(a)?"symbol":this.isDOMElement(a)?"domelement":"none"}}}},{}],4:[function(a,b){b.exports={name:"validator",items:{isEmpty:function(a){return this.isObject(a)?this.isEqual({},a):this.isArray(a)?0===a.length:!!this.isNull(a)||!!this.isUndefined(a)||(this.isNumber(a)?this.isEqual(0,a):!!this.isNan(a)||(this.isString(a)?this.isEqual("",a):!!this.isBoolean(a)&&this.isEqual(!1,a)))},isNotEmpty:function(a){return!0!==this.isEmpty(a)},isEqual:function(a,b){if(a===b)return!0;if(null===a||null===b)return!1;const c=this.getType(a),d=this.getType(b);if(c!=d)return!1;switch(c){case"object":const d=Object.keys(a),e=Object.keys(b),f=d.length;if(f!==e.length)return!1;for(let c=0;c<f;c++){const f=d[c];if(-1===e.indexOf(f))return!1;if(!this.isEqual(a[f],b[f]))return!1}return!0;break;case"array":const g=a.length;if(g!==b.length)return!1;for(let c=0;c<g;c++)if(!this.isEqual(a[c],b[c]))return!1;return!0;break;case"error":const h=this.objectifyError(a),i=this.objectifyError(b);return this.isEqual(h,i);break;case"date":return a.getTime()===b.getTime();break;case"undefined":return!0;break;case"number":case"nan":case"string":case"boolean":case"domelement":return a===b;break;case"regexp":return a.toString()===b.toString();break;default:return!1;}},isUUID:function(a){return this.regexes.uuid.test(a)},isEmail:function(a){return this.regexes.email.test(a)},isURL:function(a,b={}){if("string"!=typeof a)return!1;b=Object.assign({},{allowLocal:!1,allowDataUrl:!1,schemes:["http","https"]},b);const{allowLocal:c,allowDataUrl:d,schemes:e}=b;let f="^(?:(?:"+e.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(c?g+="?":f+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",f+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+g+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",d){f="(?:"+f+")|(?:^"+("data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,"+"[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*")+"$)"}const h=new RegExp(f,"i");return!!h.test(a)}},opts:{dependencies:["type","error"],regexes:{uuid:/[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}/g,email:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}}}},{}],5:[function(a,b){function c(a){const b=a||{},c=Object.keys(b);this._events=0<c.length?c.reduce(function(a,c){return a[c]=Array.isArray(b[c])?b[c]:[b[c]],a},{}):{}}c.prototype._eventsWillBeFiredOnce={},c.prototype.on=function(a,b,c=null){if("function"!=typeof b||"string"!=typeof a)return!1;this._events.hasOwnProperty(a)||(this._events[a]=[]),this._eventsWillBeFiredOnce.hasOwnProperty(a)||(this._eventsWillBeFiredOnce[a]=[]);const d="[object Object]"===Object.prototype.toString.call(c)?c:{once:!1},e=this._events[a].push(b);return d.once&&!0===d.once&&this._eventsWillBeFiredOnce[a].push(e-1),!0},c.prototype.once=function(a,b){return this.on(a,b,{once:!0})},c.prototype.emit=function(a,b=[]){if(!this._events.hasOwnProperty(a)){if("error"==a){const a=b instanceof Error?b:new Error("Unhandled error.");throw a}return!1}const c=Array.isArray(b)?b:[b];for(let d=0;d<this._events[a].length;d++)this._events[a][d].apply(this,c);if(this._eventsWillBeFiredOnce.hasOwnProperty(a))for(var d=0;d<this._eventsWillBeFiredOnce[a].length;d++)this.removeListener(a,this._eventsWillBeFiredOnce[a][d]);return!0},c.prototype.removeListener=function(a,b){this._events[a].splice(b,1)},c.prototype.removeListeners=function(a){return!("string"!=typeof a)&&!!this._events.hasOwnProperty(a)&&(this._events[a]=[],this._eventsWillBeFiredOnce.hasOwnProperty(a)&&(this._eventsWillBeFiredOnce[a]=[]),!0)},c.prototype.flushEventEmitter=function(){this._events={},this._eventsWillBeFiredOnce={}},b.exports=c},{}],6:[function(a,b){function c(b={},c={}){d.call(this,c||{}),this._state=b||{},this.kit=e,this.kit.addKit(a("@basekits/kit-type")),this.kit.addKit(a("@basekits/kit-error")),this.kit.addKit(a("@basekits/kit-validator"))}const d=a("event-emitter-object/source"),e=a("@basekits/core");c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.prototype._prevState=null,c.prototype.updateState=function(a){if(!this.kit.isObject(a))return;if(!this.kit.isObject(this.getState()))throw new Error("Current state is not an object and therefore canceled state update operation.");const b=Object.assign({},this.getState()),c=Object.assign({},b,a);this.kit.isEqual(b,c)||(this.emit("beforeUpdate",[b,c]),this._prevState=b,this._state=c,this.emit("afterUpdate",[this.getState(),this.getPrevState()]))},c.prototype.subscribe=function(a,b){const c=this;c.kit.isFunction(b)&&(c.kit.isString(a)||c.kit.isArray(a))&&c.on("afterUpdate",function(d,e){const f=c.kit.getProp(e,a),g=c.kit.getProp(d,a);c.kit.isEqual(g,f)||b(g,f)})},c.prototype.getState=function(){return this._state},c.prototype.getPrevState=function(){return this._prevState},b.exports=c},{"@basekits/core":1,"@basekits/kit-error":2,"@basekits/kit-type":3,"@basekits/kit-validator":4,"event-emitter-object/source":5}]},{},[6])(6)});