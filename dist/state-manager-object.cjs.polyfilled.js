"use strict";var t,e=(t=require("event-emitter-object"))&&"object"==typeof t&&"default"in t?t.default:t,n=require("basekits"),r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var i=function(t){return t&&t.Math==Math&&t},u=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r&&r)||Function("return this")(),c=function(t){try{return!!t()}catch(t){return!0}},a=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,l={f:s&&!f.call({1:2},1)?function(t){var e=s(this,t);return!!e&&e.enumerable}:f},p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},y={}.toString,h="".split,g=c((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return y.call(t).slice(8,-1)}(t)?h.call(t,""):Object(t)}:Object,b=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return g(b(t))},d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},j=function(t,e){if(!d(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!d(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,O=function(t,e){return m.call(t,e)},S=u.document,w=d(S)&&d(S.createElement),k=!a&&!c((function(){return 7!=Object.defineProperty((t="div",w?S.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),P=Object.getOwnPropertyDescriptor,_={f:a?P:function(t,e){if(t=v(t),e=j(e,!0),k)try{return P(t,e)}catch(t){}if(O(t,e))return p(!l.f.call(t,e),t[e])}},E=function(t){if(!d(t))throw TypeError(String(t)+" is not an object");return t},T=Object.defineProperty,M={f:a?T:function(t,e,n){if(E(t),e=j(e,!0),E(n),k)try{return T(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},x=a?function(t,e,n){return M.f(t,e,p(1,n))}:function(t,e,n){return t[e]=n,t},I=function(t,e){try{x(u,t,e)}catch(n){u[t]=e}return e},q=u["__core-js_shared__"]||I("__core-js_shared__",{}),F=Function.toString;"function"!=typeof q.inspectSource&&(q.inspectSource=function(t){return F.call(t)});var L,N,z,A,C=q.inspectSource,D=u.WeakMap,G="function"==typeof D&&/native code/.test(C(D)),W=o((function(t){(t.exports=function(t,e){return q[t]||(q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),K=0,R=Math.random(),V=W("keys"),Y={},B=u.WeakMap;if(G){var H=new B,J=H.get,Q=H.has,U=H.set;L=function(t,e){return U.call(H,t,e),e},N=function(t){return J.call(H,t)||{}},z=function(t){return Q.call(H,t)}}else{var X=V[A="state"]||(V[A]=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++K+R).toString(36)}(A));Y[X]=!0,L=function(t,e){return x(t,X,e),e},N=function(t){return O(t,X)?t[X]:{}},z=function(t){return O(t,X)}}var Z={set:L,get:N,has:z,enforce:function(t){return z(t)?N(t):L(t,{})},getterFor:function(t){return function(e){var n;if(!d(e)||(n=N(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},$=o((function(t){var e=Z.get,n=Z.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var c=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,f=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||O(o,"name")||x(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==u?(c?!f&&t[e]&&(a=!0):delete t[e],a?t[e]=o:x(t,e,o)):a?t[e]=o:I(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||C(this)}))})),tt=u,et=function(t){return"function"==typeof t?t:void 0},nt=Math.ceil,rt=Math.floor,ot=function(t){return isNaN(t=+t)?0:(t>0?rt:nt)(t)},it=Math.min,ut=Math.max,ct=Math.min,at=function(t){return function(e,n,r){var o,i,u=v(e),c=(o=u.length)>0?it(ot(o),9007199254740991):0,a=function(t,e){var n=ot(t);return n<0?ut(n+e,0):ct(n,e)}(r,c);if(t&&n!=n){for(;c>a;)if((i=u[a++])!=i)return!0}else for(;c>a;a++)if((t||a in u)&&u[a]===n)return t||a||0;return!t&&-1}},ft={includes:at(!0),indexOf:at(!1)}.indexOf,st=function(t,e){var n,r=v(t),o=0,i=[];for(n in r)!O(Y,n)&&O(r,n)&&i.push(n);for(;e.length>o;)O(r,n=e[o++])&&(~ft(i,n)||i.push(n));return i},lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],pt=lt.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return st(t,pt)}},ht={f:Object.getOwnPropertySymbols},gt=function(t,e){return arguments.length<2?et(tt[t])||et(u[t]):tt[t]&&tt[t][e]||u[t]&&u[t][e]}("Reflect","ownKeys")||function(t){var e=yt.f(E(t)),n=ht.f;return n?e.concat(n(t)):e},bt=function(t,e){for(var n=gt(e),r=M.f,o=_.f,i=0;i<n.length;i++){var u=n[i];O(t,u)||r(t,u,o(e,u))}},vt=/#|\.prototype\./,dt=function(t,e){var n=mt[jt(t)];return n==St||n!=Ot&&("function"==typeof e?c(e):!!e)},jt=dt.normalize=function(t){return String(t).replace(vt,".").toLowerCase()},mt=dt.data={},Ot=dt.NATIVE="N",St=dt.POLYFILL="P",wt=dt,kt=_.f,Pt=Object.keys||function(t){return st(t,lt)},_t=function(t){return Object(b(t))},Et=Object.assign,Tt=Object.defineProperty,Mt=!Et||c((function(){if(a&&1!==Et({b:1},Et(Tt({},"a",{enumerable:!0,get:function(){Tt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Et({},t)[n]||"abcdefghijklmnopqrst"!=Pt(Et({},e)).join("")}))?function(t,e){for(var n=_t(t),r=arguments.length,o=1,i=ht.f,u=l.f;r>o;)for(var c,f=g(arguments[o++]),s=i?Pt(f).concat(i(f)):Pt(f),p=s.length,y=0;p>y;)c=s[y++],a&&!u.call(f,c)||(n[c]=f[c]);return n}:Et;function xt(t,n){e.call(this,n),this.checkInitialState(t)}!function(t,e){var n,r,o,i,c,a=t.target,f=t.global,s=t.stat;if(n=f?u:s?u[a]||I(a,{}):(u[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(c=kt(n,r))&&c.value:n[r],!wt(f?r:a+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;bt(i,o)}(t.sham||o&&o.sham)&&x(i,"sham",!0),$(n,r,i,t)}}({target:"Object",stat:!0,forced:Object.assign!==Mt},{assign:Mt}),xt.prototype=Object.create(e.prototype),xt.prototype.constructor=xt,xt.prototype._state={},xt.prototype._prevState=null,xt.prototype.checkInitialState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;n.validationkit.isObject(t)&&(this._state=t)},xt.prototype.updateState=function(t){if(n.validationkit.isObject(t)){var e=Object.assign({},this.getState()),r=Object.assign({},e,t);return!n.validationkit.isEqual(e,r)&&(this._prevState=e,this._state=r,this.emit("update",[this.getState(),this.getPrevState()]),!0)}},xt.prototype.subscribe=function(t,e){n.validationkit.isFunction(e)&&(n.validationkit.isString(t)||n.validationkit.isArray(t))&&this.on("update",(function(r,o){var i=n.objectkit.getProp(o,t),u=n.objectkit.getProp(r,t);n.validationkit.isEqual(u,i)||e(u,i)}))},xt.prototype.getState=function(){return this._state},xt.prototype.getPrevState=function(){return this._prevState},module.exports=xt;
