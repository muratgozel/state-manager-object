"use strict";var t,e=(t=require("event-emitter-object"))&&"object"==typeof t&&"default"in t?t.default:t,i=require("basekits");function o(t,i){e.call(this,i),this.checkInitialState(t)}o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._state={},o.prototype._prevState=null,o.prototype.checkInitialState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;i.validationkit.isObject(t)&&(this._state=t)},o.prototype.updateState=function(t){if(i.validationkit.isObject(t)){var e=Object.assign({},this.getState()),o=Object.assign({},e,t);return!i.validationkit.isEqual(e,o)&&(this._prevState=e,this._state=o,this.emit("update",[this.getState(),this.getPrevState()]),!0)}},o.prototype.subscribe=function(t,e){i.validationkit.isFunction(e)&&(i.validationkit.isString(t)||i.validationkit.isArray(t))&&this.on("update",(function(o,a){var r=i.objectkit.getProp(a,t),n=i.objectkit.getProp(o,t);i.validationkit.isEqual(n,r)||e(n,r)}))},o.prototype.getState=function(){return this._state},o.prototype.getPrevState=function(){return this._prevState},module.exports=o;
