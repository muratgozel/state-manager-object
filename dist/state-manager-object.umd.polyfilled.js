!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("event-emitter-object"),require("basekits")):"function"==typeof define&&define.amd?define(["event-emitter-object","basekits"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).StateManagerObject=e(t.EventEmitterObject,t.Basekits)}(this,(function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t,e){return t(e={exports:{}},e.exports),e.exports}var u=function(t){return t&&t.Math==Math&&t},c=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof o&&o)||Function("return this")(),f=function(t){try{return!!t()}catch(t){return!0}},a=!f((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p={f:l&&!s.call({1:2},1)?function(t){var e=l(this,t);return!!e&&e.enumerable}:s},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b={}.toString,h="".split,g=f((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return b.call(t).slice(8,-1)}(t)?h.call(t,""):Object(t)}:Object,d=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return g(d(t))},j=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t,e){if(!j(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!j(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!j(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!j(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},O={}.hasOwnProperty,S=function(t,e){return O.call(t,e)},w=c.document,k=j(w)&&j(w.createElement),P=!a&&!f((function(){return 7!=Object.defineProperty((t="div",k?w.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),_=Object.getOwnPropertyDescriptor,E={f:a?_:function(t,e){if(t=v(t),e=m(e,!0),P)try{return _(t,e)}catch(t){}if(S(t,e))return y(!p.f.call(t,e),t[e])}},T=function(t){if(!j(t))throw TypeError(String(t)+" is not an object");return t},M=Object.defineProperty,x={f:a?M:function(t,e,n){if(T(t),e=m(e,!0),T(n),P)try{return M(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=a?function(t,e,n){return x.f(t,e,y(1,n))}:function(t,e,n){return t[e]=n,t},q=function(t,e){try{I(c,t,e)}catch(n){c[t]=e}return e},F=c["__core-js_shared__"]||q("__core-js_shared__",{}),L=Function.toString;"function"!=typeof F.inspectSource&&(F.inspectSource=function(t){return L.call(t)});var N,z,A,C,D=F.inspectSource,G=c.WeakMap,W="function"==typeof G&&/native code/.test(D(G)),B=i((function(t){(t.exports=function(t,e){return F[t]||(F[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),K=0,R=Math.random(),V=B("keys"),Y={},H=c.WeakMap;if(W){var J=new H,Q=J.get,U=J.has,X=J.set;N=function(t,e){return X.call(J,t,e),e},z=function(t){return Q.call(J,t)||{}},A=function(t){return U.call(J,t)}}else{var Z=V[C="state"]||(V[C]=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++K+R).toString(36)}(C));Y[Z]=!0,N=function(t,e){return I(t,Z,e),e},z=function(t){return S(t,Z)?t[Z]:{}},A=function(t){return S(t,Z)}}var $={set:N,get:z,has:A,enforce:function(t){return A(t)?z(t):N(t,{})},getterFor:function(t){return function(e){var n;if(!j(e)||(n=z(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},tt=i((function(t){var e=$.get,n=$.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var u=!!i&&!!i.unsafe,f=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||S(o,"name")||I(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==c?(u?!a&&t[e]&&(f=!0):delete t[e],f?t[e]=o:I(t,e,o)):f?t[e]=o:q(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||D(this)}))})),et=c,nt=function(t){return"function"==typeof t?t:void 0},rt=Math.ceil,ot=Math.floor,it=function(t){return isNaN(t=+t)?0:(t>0?ot:rt)(t)},ut=Math.min,ct=Math.max,ft=Math.min,at=function(t){return function(e,n,r){var o,i,u=v(e),c=(o=u.length)>0?ut(it(o),9007199254740991):0,f=function(t,e){var n=it(t);return n<0?ct(n+e,0):ft(n,e)}(r,c);if(t&&n!=n){for(;c>f;)if((i=u[f++])!=i)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===n)return t||f||0;return!t&&-1}},st={includes:at(!0),indexOf:at(!1)}.indexOf,lt=function(t,e){var n,r=v(t),o=0,i=[];for(n in r)!S(Y,n)&&S(r,n)&&i.push(n);for(;e.length>o;)S(r,n=e[o++])&&(~st(i,n)||i.push(n));return i},pt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yt=pt.concat("length","prototype"),bt={f:Object.getOwnPropertyNames||function(t){return lt(t,yt)}},ht={f:Object.getOwnPropertySymbols},gt=function(t,e){return arguments.length<2?nt(et[t])||nt(c[t]):et[t]&&et[t][e]||c[t]&&c[t][e]}("Reflect","ownKeys")||function(t){var e=bt.f(T(t)),n=ht.f;return n?e.concat(n(t)):e},dt=function(t,e){for(var n=gt(e),r=x.f,o=E.f,i=0;i<n.length;i++){var u=n[i];S(t,u)||r(t,u,o(e,u))}},vt=/#|\.prototype\./,jt=function(t,e){var n=Ot[mt(t)];return n==wt||n!=St&&("function"==typeof e?f(e):!!e)},mt=jt.normalize=function(t){return String(t).replace(vt,".").toLowerCase()},Ot=jt.data={},St=jt.NATIVE="N",wt=jt.POLYFILL="P",kt=jt,Pt=E.f,_t=Object.keys||function(t){return lt(t,pt)},Et=function(t){return Object(d(t))},Tt=Object.assign,Mt=Object.defineProperty,xt=!Tt||f((function(){if(a&&1!==Tt({b:1},Tt(Mt({},"a",{enumerable:!0,get:function(){Mt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=Tt({},t)[n]||"abcdefghijklmnopqrst"!=_t(Tt({},e)).join("")}))?function(t,e){for(var n=Et(t),r=arguments.length,o=1,i=ht.f,u=p.f;r>o;)for(var c,f=g(arguments[o++]),s=i?_t(f).concat(i(f)):_t(f),l=s.length,y=0;l>y;)c=s[y++],a&&!u.call(f,c)||(n[c]=f[c]);return n}:Tt;function It(t,e){r.default.call(this,e),this.checkInitialState(t)}return function(t,e){var n,r,o,i,u,f=t.target,a=t.global,s=t.stat;if(n=a?c:s?c[f]||q(f,{}):(c[f]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(u=Pt(n,r))&&u.value:n[r],!kt(a?r:f+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;dt(i,o)}(t.sham||o&&o.sham)&&I(i,"sham",!0),tt(n,r,i,t)}}({target:"Object",stat:!0,forced:Object.assign!==xt},{assign:xt}),It.prototype=Object.create(r.default.prototype),It.prototype.constructor=It,It.prototype._state={},It.prototype._prevState=null,It.prototype.checkInitialState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.validationkit.isObject(t)&&(this._state=t)},It.prototype.updateState=function(t){if(e.validationkit.isObject(t)){var n=Object.assign({},this.getState()),r=Object.assign({},n,t);return!e.validationkit.isEqual(n,r)&&(this._prevState=n,this._state=r,this.emit("update",[this.getState(),this.getPrevState()]),!0)}},It.prototype.subscribe=function(t,n){e.validationkit.isFunction(n)&&(e.validationkit.isString(t)||e.validationkit.isArray(t))&&this.on("update",(function(r,o){var i=e.objectkit.getProp(o,t),u=e.objectkit.getProp(r,t);e.validationkit.isEqual(u,i)||n(u,i)}))},It.prototype.getState=function(){return this._state},It.prototype.getPrevState=function(){return this._prevState},It}));
