!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("basekits"),require("event-emitter-object")):"function"==typeof define&&define.amd?define(["basekits","event-emitter-object"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).StateManagerObject=e(t.Basekits,t.EventEmitterObject)}(this,(function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),o=n(e),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t){var e={exports:{}};return t(e,e.exports),e.exports}var f=function(t){return t&&t.Math==Math&&t},c=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof i&&i)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},l=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,b={f:p&&!s.call({1:2},1)?function(t){var e=p(this,t);return!!e&&e.enumerable}:s},d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},y={}.toString,v="".split,g=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return y.call(t).slice(8,-1)}(t)?v.call(t,""):Object(t)}:Object,h=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},j=function(t){return g(h(t))},m=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t,e){if(!m(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!m(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!m(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},S={}.hasOwnProperty,w=function(t,e){return S.call(t,e)},E=c.document,P=m(E)&&m(E.createElement),T=!l&&!a((function(){return 7!=Object.defineProperty((t="div",P?E.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),k=Object.getOwnPropertyDescriptor,M={f:l?k:function(t,e){if(t=j(t),e=O(e,!0),T)try{return k(t,e)}catch(t){}if(w(t,e))return d(!b.f.call(t,e),t[e])}},x=function(t){if(!m(t))throw TypeError(String(t)+" is not an object");return t},I=Object.defineProperty,q={f:l?I:function(t,e,n){if(x(t),e=O(e,!0),x(n),T)try{return I(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},_=l?function(t,e,n){return q.f(t,e,d(1,n))}:function(t,e,n){return t[e]=n,t},F=function(t,e){try{_(c,t,e)}catch(n){c[t]=e}return e},L="__core-js_shared__",N=c[L]||F(L,{}),z=Function.toString;"function"!=typeof N.inspectSource&&(N.inspectSource=function(t){return z.call(t)});var C,D,A,G,W=N.inspectSource,B=c.WeakMap,K="function"==typeof B&&/native code/.test(W(B)),R=u((function(t){(t.exports=function(t,e){return N[t]||(N[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),V=0,Y=Math.random(),H=R("keys"),J={},Q=c.WeakMap;if(K){var U=N.state||(N.state=new Q),X=U.get,Z=U.has,$=U.set;C=function(t,e){return e.facade=t,$.call(U,t,e),e},D=function(t){return X.call(U,t)||{}},A=function(t){return Z.call(U,t)}}else{var tt=H[G="state"]||(H[G]=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++V+Y).toString(36)}(G));J[tt]=!0,C=function(t,e){return e.facade=t,_(t,tt,e),e},D=function(t){return w(t,tt)?t[tt]:{}},A=function(t){return w(t,tt)}}var et={set:C,get:D,has:A,enforce:function(t){return A(t)?D(t):C(t,{})},getterFor:function(t){return function(e){var n;if(!m(e)||(n=D(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=u((function(t){var e=et.get,n=et.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var u,f=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||w(o,"name")||_(o,"name",e),(u=n(o)).source||(u.source=r.join("string"==typeof e?e:""))),t!==c?(f?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=o:_(t,e,o)):a?t[e]=o:F(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||W(this)}))})),rt=c,ot=function(t){return"function"==typeof t?t:void 0},it=Math.ceil,ut=Math.floor,ft=function(t){return isNaN(t=+t)?0:(t>0?ut:it)(t)},ct=Math.min,at=Math.max,lt=Math.min,st=function(t){return function(e,n,r){var o,i,u=j(e),f=(o=u.length)>0?ct(ft(o),9007199254740991):0,c=function(t,e){var n=ft(t);return n<0?at(n+e,0):lt(n,e)}(r,f);if(t&&n!=n){for(;f>c;)if((i=u[c++])!=i)return!0}else for(;f>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}},pt={includes:st(!0),indexOf:st(!1)}.indexOf,bt=function(t,e){var n,r=j(t),o=0,i=[];for(n in r)!w(J,n)&&w(r,n)&&i.push(n);for(;e.length>o;)w(r,n=e[o++])&&(~pt(i,n)||i.push(n));return i},dt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yt=dt.concat("length","prototype"),vt={f:Object.getOwnPropertyNames||function(t){return bt(t,yt)}},gt={f:Object.getOwnPropertySymbols},ht=function(t,e){return arguments.length<2?ot(rt[t])||ot(c[t]):rt[t]&&rt[t][e]||c[t]&&c[t][e]}("Reflect","ownKeys")||function(t){var e=vt.f(x(t)),n=gt.f;return n?e.concat(n(t)):e},jt=function(t,e){for(var n=ht(e),r=q.f,o=M.f,i=0;i<n.length;i++){var u=n[i];w(t,u)||r(t,u,o(e,u))}},mt=/#|\.prototype\./,Ot=function(t,e){var n=wt[St(t)];return n==Pt||n!=Et&&("function"==typeof e?a(e):!!e)},St=Ot.normalize=function(t){return String(t).replace(mt,".").toLowerCase()},wt=Ot.data={},Et=Ot.NATIVE="N",Pt=Ot.POLYFILL="P",Tt=Ot,kt=M.f,Mt=Object.keys||function(t){return bt(t,dt)},xt=function(t){return Object(h(t))},It=Object.assign,qt=Object.defineProperty,_t=!It||a((function(){if(l&&1!==It({b:1},It(qt({},"a",{enumerable:!0,get:function(){qt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=It({},t)[n]||Mt(It({},e)).join("")!=r}))?function(t,e){for(var n=xt(t),r=arguments.length,o=1,i=gt.f,u=b.f;r>o;)for(var f,c=g(arguments[o++]),a=i?Mt(c).concat(i(c)):Mt(c),s=a.length,p=0;s>p;)f=a[p++],l&&!u.call(c,f)||(n[f]=c[f]);return n}:It;!function(t,e){var n,r,o,i,u,f=t.target,a=t.global,l=t.stat;if(n=a?c:l?c[f]||F(f,{}):(c[f]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(u=kt(n,r))&&u.value:n[r],!Tt(a?r:f+(l?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;jt(i,o)}(t.sham||o&&o.sham)&&_(i,"sham",!0),nt(n,r,i,t)}}({target:"Object",stat:!0,forced:Object.assign!==_t},{assign:_t});var Ft=r.default.typekit,Lt=r.default.objectkit,Nt=r.default.validationkit;return{create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(!Ft.isObject(t))throw new Error("Invalid initial state.");var e=o.default.create(),n={state:t,prevState:null};function r(t){if(!Ft.isObject(t))throw new Error("Invalid payload.");var r=u(),o=Object.assign({},r,t);Nt.isEqual(r,o)||(n.state=o,n.prevState=r,e.emit("update",[n.state,n.prevState]))}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r="string"==typeof t?t:void 0,o=void 0===r?t:n;if("function"!=typeof o)throw new Error("Subscriber function should be a type of function.");e.on("update",(function(t,e){var n=r?Lt.getProp(t,r):t,i=r?Lt.getProp(e,r):e;Nt.isEqual(n,i)||o(n,i)}))}function u(){return n.state}function f(){return n.prevState}return{getState:u,getPrevState:f,updateState:r,subscribe:i}}}}));
